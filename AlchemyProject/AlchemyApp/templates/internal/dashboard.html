{% extends "internal/internal.html" %}

{% block navtitle %}
| <span class="text-blue-700">{{client}}</span>
{% endblock %}

{% block body %}
<div class="w-screen h-screen md:flex bg-blue-100">
    <!-- Add the responsive grid container and items below -->
    <div class="container mx-auto px-4 py-10">
        <div id="grid-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">
            {% for system in systems %}
            <div class="h-72 bg-white rounded-lg shadow-md hover:cursor-pointer transform hover:scale-105 transition duration-300 ease-in-out hover:shadow-lg opacity-0 translate-y-10 flex flex-col">
                <div style="background-color: #{{system.color}};" class="rounded-t-lg top_section h-3/4">

                </div>
                <div class="bottom_section h-1/4 flex justify-center items-center">
                    <span class="text-xl font-bold text-blue-500 hover:text-blue-700 duration-300">{{system.name}}</span>
                </div>
            </div>
            {% endfor %}
            <div class="open-modal h-72 bg-white p-6 rounded-lg shadow-md flex items-center justify-center hover:cursor-pointer hover:bg-gray-100 transform hover:scale-105 transition duration-300 ease-in-out hover:shadow-lg opacity-0 translate-y-10">
                <i class="fas fa-plus text-blue-500 text-4xl"></i>
              </div>                          
        </div>
    </div>
</div>

<!-- Modal container -->
<div class="modal fixed z-10 inset-0 bg-black bg-opacity-50 hidden transition opacity duration-300" id="modal-container">
    <div class="flex items-center justify-center min-h-screen text-center">
        <div class="bg-white rounded-lg w-11/12 md:w-3/4 lg:w-1/2 p-6 mx-auto transition-opacity duration-300 opacity-0 modal-content">
            <!-- Modal content -->
            <h1 class="text-2xl font-bold text-blue-500 mb-4">Add System</h1>
            <form action="{% url 'alchemy:dashboard' client %}" method="post" class="space-y-4">
                {% csrf_token %}
                <div>
                    <label for="system_name" class="blockleft mb-1 font-semibold text-sm text-blue-700">System Name</label>
                    <input type="text" name="system_name" id="system_name" placeholder="e.g., HR Management System" required class="mt-1 w-full p-2.5 text-sm border-0 border-b-2 border-gray-200 text-gray-900 focus:ring-0 focus:border-blue-500 hover:border-blue-400 transition duration-200">
                </div>
                <button type="submit" class="bg-blue-500 w-1/2 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded">Add System</button>
            </form>
        </div>
    </div>
</div>



<script>
    document.addEventListener("DOMContentLoaded", function() {
        const gridContainer = document.querySelector("#grid-container");
        const gridItems = gridContainer.children;

        const fadeInDelay = 100; // Animation delay in milliseconds
        let delayCounter = 0; // Counter to control the animation timing

        for (let i = 0; i < gridItems.length; i++) {
            setTimeout(function() {
                gridItems[i].classList.remove("opacity-0", "translate-y-10");
                gridItems[i].classList.add("transition", "duration-500", "ease-in-out");
            }, delayCounter);
            delayCounter += fadeInDelay;
        }
    });

    // Get the modal and the button that opens the modal
    const modal = document.getElementById("modal-container");
    const openModalBtn = document.querySelector(".open-modal");

    openModalBtn.addEventListener("click", function () {
        modal.classList.remove("hidden");
        setTimeout(() => {
            modal.querySelector(".modal-content").classList.remove("opacity-0");
        }, 50);
    });

   // Close the modal when clicking outside of the content
    modal.addEventListener("click", function (event) {
        if (event.target === modal || event.target.closest(".modal-content") === null) {
            closeModal();
        }
    });

    function closeModal() {
        modal.querySelector(".modal-content").classList.add("opacity-0");
        setTimeout(() => {
            modal.classList.add("hidden");
        }, 300);
    }

</script>
{% endblock %}